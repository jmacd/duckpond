# Six temporal-reduce groups covering all 25 active Modbus/BME280 variables.
#
# Early log entries had mangled column names (double-underscore prefix) from a
# misconfigured otelcol; those are inactive and excluded here.

entries:
  # ── Pump Amps ────────────────────────────────────────────────────────────
  - name: "pumps"
    factory: "temporal-reduce"
    config:
      in_pattern: "oteljson:///ingest/septicstation.json"
      out_pattern: "data"
      time_column: "timestamp"
      resolutions: [1h, 6h, 1d]
      aggregations:
        - type: "avg"
          columns:
            - "orenco_RT_Pump1_Amps"
            - "orenco_RT_Pump2_Amps"
            - "orenco_DT_Pump3_Amps"
            - "orenco_DT_Pump4_Amps"
        - type: "min"
          columns:
            - "orenco_RT_Pump1_Amps"
            - "orenco_RT_Pump2_Amps"
            - "orenco_DT_Pump3_Amps"
            - "orenco_DT_Pump4_Amps"
        - type: "max"
          columns:
            - "orenco_RT_Pump1_Amps"
            - "orenco_RT_Pump2_Amps"
            - "orenco_DT_Pump3_Amps"
            - "orenco_DT_Pump4_Amps"

  # ── Pump Cycle Times ────────────────────────────────────────────────────
  - name: "cycle-times"
    factory: "temporal-reduce"
    config:
      in_pattern: "oteljson:///ingest/septicstation.json"
      out_pattern: "data"
      time_column: "timestamp"
      resolutions: [1h, 6h, 1d]
      aggregations:
        - type: "avg"
          columns:
            - "orenco_RT_Pump1_CT"
            - "orenco_RT_Pump2_CT"
            - "orenco_DT_Pump3_CT"
            - "orenco_DT_Pump4_CT"
        - type: "min"
          columns:
            - "orenco_RT_Pump1_CT"
            - "orenco_RT_Pump2_CT"
            - "orenco_DT_Pump3_CT"
            - "orenco_DT_Pump4_CT"
        - type: "max"
          columns:
            - "orenco_RT_Pump1_CT"
            - "orenco_RT_Pump2_CT"
            - "orenco_DT_Pump3_CT"
            - "orenco_DT_Pump4_CT"

  # ── Pump Modes ──────────────────────────────────────────────────────────
  - name: "pump-modes"
    factory: "temporal-reduce"
    config:
      in_pattern: "oteljson:///ingest/septicstation.json"
      out_pattern: "data"
      time_column: "timestamp"
      resolutions: [1h, 6h, 1d]
      aggregations:
        - type: "avg"
          columns:
            - "orenco_RT_PumpMode"
            - "orenco_DT_PumpMode"
        - type: "min"
          columns:
            - "orenco_RT_PumpMode"
            - "orenco_DT_PumpMode"
        - type: "max"
          columns:
            - "orenco_RT_PumpMode"
            - "orenco_DT_PumpMode"

  # ── Flow Totals ─────────────────────────────────────────────────────────
  - name: "flow-totals"
    factory: "temporal-reduce"
    config:
      in_pattern: "oteljson:///ingest/septicstation.json"
      out_pattern: "data"
      time_column: "timestamp"
      resolutions: [1h, 6h, 1d]
      aggregations:
        - type: "avg"
          columns:
            - "orenco_RT_TotalCount"
            - "orenco_RT_TotalFlow"
            - "orenco_RT_TotalTime"
            - "orenco_DT_TotalCount"
            - "orenco_DT_TotalFlow"
            - "orenco_DT_TotalTime"
        - type: "min"
          columns:
            - "orenco_RT_TotalCount"
            - "orenco_RT_TotalFlow"
            - "orenco_RT_TotalTime"
            - "orenco_DT_TotalCount"
            - "orenco_DT_TotalFlow"
            - "orenco_DT_TotalTime"
        - type: "max"
          columns:
            - "orenco_RT_TotalCount"
            - "orenco_RT_TotalFlow"
            - "orenco_RT_TotalTime"
            - "orenco_DT_TotalCount"
            - "orenco_DT_TotalFlow"
            - "orenco_DT_TotalTime"

  # ── Dose Zones ──────────────────────────────────────────────────────────
  - name: "dose-zones"
    factory: "temporal-reduce"
    config:
      in_pattern: "oteljson:///ingest/septicstation.json"
      out_pattern: "data"
      time_column: "timestamp"
      resolutions: [1h, 6h, 1d]
      aggregations:
        - type: "avg"
          columns:
            - "orenco_Zone1_CountTday"
            - "orenco_Zone1_TimeTday"
            - "orenco_Zone2_CountTday"
            - "orenco_Zone2_TimeTday"
            - "orenco_Zone3_CountTday"
            - "orenco_Zone3_TimeTday"
        - type: "min"
          columns:
            - "orenco_Zone1_CountTday"
            - "orenco_Zone1_TimeTday"
            - "orenco_Zone2_CountTday"
            - "orenco_Zone2_TimeTday"
            - "orenco_Zone3_CountTday"
            - "orenco_Zone3_TimeTday"
        - type: "max"
          columns:
            - "orenco_Zone1_CountTday"
            - "orenco_Zone1_TimeTday"
            - "orenco_Zone2_CountTday"
            - "orenco_Zone2_TimeTday"
            - "orenco_Zone3_CountTday"
            - "orenco_Zone3_TimeTday"

  # ── Environment (BME280) ────────────────────────────────────────────────
  - name: "environment"
    factory: "temporal-reduce"
    config:
      in_pattern: "oteljson:///ingest/septicstation.json"
      out_pattern: "data"
      time_column: "timestamp"
      resolutions: [1h, 6h, 1d]
      aggregations:
        - type: "avg"
          columns:
            - "septicstation_temperature"
            - "septicstation_pressure"
            - "septicstation_humidity"
        - type: "min"
          columns:
            - "septicstation_temperature"
            - "septicstation_pressure"
            - "septicstation_humidity"
        - type: "max"
          columns:
            - "septicstation_temperature"
            - "septicstation_pressure"
            - "septicstation_humidity"
