# Temporal reduce: downsample to 1h resolution with avg/min/max
#
# Input: /combined/* (the per-site joined series)
#   and: /singled/*  (the per-param pivoted series)
# Output: /reduced/single_site/$0/res=1h.series
#     and: /reduced/single_param/$0/res=1h.series

entries:
  - name: "single_site"
    factory: "temporal-reduce"
    config:
      in_pattern: "/combined/*"
      out_pattern: "$0"
      time_column: "timestamp"
      resolutions: [1h]
      aggregations:
        - type: "avg"
          columns: ["*"]
        - type: "min"
          columns: ["*"]
        - type: "max"
          columns: ["*"]

  - name: "single_param"
    factory: "temporal-reduce"
    config:
      in_pattern: "/singled/*"
      out_pattern: "$0"
      time_column: "timestamp"
      resolutions: [1h]
      aggregations:
        - type: "avg"
          columns: ["*"]
        - type: "min"
          columns: ["*"]
        - type: "max"
          columns: ["*"]
